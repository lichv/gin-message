import{r as e,o as t,c as i,a,b as o,C as s,D as n,d as r,w as l,F as d,e as c,f as h,g as u,t as m,h as p,i as g,j as f,k as y,l as w}from"./vendor.a921d300.js";const x={};x.render=function(a,o){const s=e("router-view");return t(),i(s)};let v;const k={},_=function(e,t){if(!t)return e();if(void 0===v){const e=document.createElement("link").relList;v=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in k)return;k[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":v,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};var O=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null};const P=a({history:o(),routes:[{path:"/",name:"Index",component:()=>_((()=>import("./Index.3e92791d.js")),["/static/Index.3e92791d.js","/static/vendor.a921d300.js"])},{path:"/login",name:"Login",component:()=>_((()=>import("./Login.54ca79d1.js")),["/static/Login.54ca79d1.js","/static/vendor.a921d300.js"])},{path:"/test",name:"Test",component:()=>_((()=>import("./Test.d4571d70.js")),["/static/Test.d4571d70.js","/static/vendor.a921d300.js"])},{path:"/monitor",component:()=>_((()=>import("./Layout.3b87794e.js")),["/static/Layout.3b87794e.js","/static/Layout.58fea918.css","/static/vendor.a921d300.js"]),children:[{path:"",name:"Monitor",component:()=>_((()=>import("./Index.3d9b78dd.js")),["/static/Index.3d9b78dd.js","/static/Index.8ca9d18b.css","/static/vendor.a921d300.js"])},{path:"empty",component:()=>_((()=>import("./Empty.457514e4.js")),["/static/Empty.457514e4.js","/static/vendor.a921d300.js"])}]}]});P.beforeEach(((e,t,i)=>{console.log("路由拦截");var a=O("user_token");(a||void 0===a||0==a)&&(localStorage.setItem("user_token",a),s.set("user_token",a),parent.location.reload(),window.location.href="/");var o=!1,n=s.get("user_token");console.log("beforeEach_user_token",n),null!=n&&""!==n&&(o=!0),"Login"===e.name||o?"Login"==e.name&&o?i({name:"Index"}):i():i({name:"Login"})}));const L=n.create({baseURL:"/",timeout:6e3});L.interceptors.request.use((e=>{var t=localStorage.getItem("user_token");return t||void 0===t||0==t||(t=s.get("user_token")),t&&(e.headers.common["X-TOKEN"]=t),e}),(e=>Promise.reject(e))),L.interceptors.response.use((e=>{console.log("service.interceptors.response.success",e);const{headers:t,data:i,status:a}=e;return"200"==a||i.success||"success"==i.result?i:Promise.reject()}),(e=>(console.log("service.interceptors.response.error",e.code),401==e.code&&(console.log("登录失败"),s.remove("user_token"),localStorage.removeItem("user_token")),Promise.reject(e))));let b={send:function(e){return L({url:"/api/monitor/monitor/getPages",data:e,method:"POST"})}},E={send:function(e){return L({url:"/api/monitor/monitor/productDistribution",data:e,method:"POST"})}},C={send:function(e){return L({url:"/api/monitor/monitor/statusDistribution",data:e,method:"POST"})}},z={send:function(e){return L({url:"/api/monitor/monitor/getSeqNos",data:e,method:"POST"})}},S={send:function(e){return L({url:"http://auth.lichv.com/wechat/config",data:e,method:"POST"})}},A={send:function(e){return L({url:"http://auth.lichv.com/api/v1/user/self",data:e,method:"POST"})}},I={getMonitorPages:b,getProductDistribution:E,getStatusDistribution:C,getSeqNos:z,getWechatConfig:S,getWechatUser:A};var D=r({state:{username:"admin",userinfo:{}},getters:{},mutations:{},actions:{getLoginUser(e){var t=localStorage.getItem("user_token");t||void 0===t||0==t||(t=s.get("user_token")),t&&I.getWechatUser.send().then((t=>{console.log("getWechatUser",t),2e3==t.state?(e.state.userinfo=t.data,s.set("nickname",t.data.nickname)):(s.remove("user_token"),s.remove("nickname"))})).catch((e=>{s.remove("user_token"),s.remove("nickname"),console.log(e)}))}}});const T={name:"ElAsiderMenu",data(){return{showCollapse:!1,data:this.tree,treeData:[{link:"/monitor/",title:"面板",icon:"el-icon-odometer"},{link:"/monitor/",title:"检测单管理",icon:"el-icon-user",children:[{link:"/monitor/",title:"检测单",icon:"el-icon-menu"}]}]}},props:{tree:{type:Array,default:[]},isCollapse:{type:Boolean,default:!1}},mounted(){console.log("this.data",this.data),this.showCollapse=this.isCollapse},methods:{showAside(){this.isCollapse=!this.isCollapse},handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},handleClick(){console.log("isCollapse",this.isCollapse),this.isCollapse=!this.isCollapse}}},V={slot:"title"},B={slot:"title"},j={slot:"title"},$={slot:"title"};T.render=function(a,o,s,n,r,p){const g=e("el-menu-item"),f=e("el-submenu"),y=e("el-menu");return t(),i(y,{uniqueOpened:!0,"default-active":"2",class:"el-menu-vertical-demo",onOpen:p.handleOpen,onClose:p.handleClose,"background-color":"#001529","text-color":"#aaa","active-text-color":"#fff",collapse:s.isCollapse,router:""},{default:l((()=>[(t(!0),i(d,null,c(r.treeData,(e=>(t(),i(d,null,["children"in e&&Object.keys(e.children).length>0?(t(),i(f,{key:0,index:e.link+""},{title:l((()=>[""!=e.icon?(t(),i("i",{key:0,class:e.icon},null,2)):h("",!0),u("span",V,m(e.title),1)])),default:l((()=>[(t(!0),i(d,null,c(e.children,(e=>(t(),i(d,null,["children"in e&&Object.keys(e.children).length>0?(t(),i(f,{key:0,index:e.link+"",class:"grandmenu"},{title:l((()=>[""!=e.icon?(t(),i("i",{key:0,class:e.icon},null,2)):h("",!0),u("span",B,m(e.title),1)])),default:l((()=>[(t(!0),i(d,null,c(e.children,(e=>(t(),i(g,{index:e.id+""},{title:l((()=>[""!=e.icon?(t(),i("i",{key:0,class:e.icon},null,2)):h("",!0),u("span",j,m(e.title),1)])),_:2},1032,["index"])))),256))])),_:2},1032,["index"])):(t(),i(g,{key:1,index:e.link+""},{title:l((()=>[""!=e.icon?(t(),i("i",{key:0,class:e.icon},null,2)):h("",!0),u("span",$,m(e.title),1)])),_:2},1032,["index"]))],64)))),256))])),_:2},1032,["index"])):(t(),i(g,{key:1,index:e.link+""},{title:l((()=>[u("span",null,m(e.title),1)])),default:l((()=>[""!=e.icon?(t(),i("i",{key:0,class:e.icon},null,2)):h("",!0)])),_:2},1032,["index"]))],64)))),256))])),_:1},8,["onOpen","onClose","collapse"])};const q={name:"ElChart",data:()=>({id:Math.random().toString(36).substr(2),data:[],chartPie:{}}),props:{},mounted(){this.getData()},methods:{initChartBar(e,t){var i={dataZoom:[{type:"inside",throttle:"50",minValueSpan:10,start:100,end:100,zoomLock:!0}],title:{text:t.title},tooltip:{trigger:"axis",axisPointer:{type:"none"}},xAxis:{type:"category",data:t.x,axisTick:{show:!1}},yAxis:{type:"value"},series:[{type:"bar",data:t.y}]};let a=this.$echarts.init(document.getElementById(e));a.setOption(i),window.addEventListener("resize",(()=>{a.resize()}))},initChartPie(e,t){if(this.chartPie[e]){(i=this.chartPie[e].getOption()).series[0].data=[],this.chartPie[e].setOption(i),i.series[0].data=t.data,this.chartPie[e].setOption(i)}else{let a=this.$echarts.init(document.getElementById(e));var i={tooltip:{trigger:"item"},series:[{name:t.name,type:"pie",radius:"50%",data:t.data,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(i),window.addEventListener("resize",(()=>{a.resize()})),this.chartPie[e]=a}},initChartLine(e,t){if(this.chartLine){(i=this.chartLine.getOption()).xAxis[0].data=[],i.series[0].data=[],this.chartLine.setOption(i),i.xAxis[0].data=e,i.series[0].data=t,i.dataZoom[0].start=100,i.dataZoom[0].end=100,this.chartLine.setOption(i)}else{let a=this.$echarts.init(document.getElementById("echart-line"));var i={dataZoom:[{type:"inside",throttle:"50",minValueSpan:5,start:100,end:100,zoomLock:!0}],tooltip:{trigger:"axis",axisPointer:{}},xAxis:{type:"category",data:e,axisTick:{show:!1}},yAxis:{type:"value"},series:[{type:"line",data:t}]};a.setOption(i),window.addEventListener("resize",(()=>{a.resize()})),this.chartLine=a}},getData:function(){let e=this;I.getProductionDistribution.send().then((t=>{console.log("result",t),2e3==t.state&&(e.data=t.data,e.initChartPie(e.id,{name:"产品分布",data:e.data}))})).catch((e=>{console.log(e)}))}}};q.render=function(e,a,o,s,n,r){return t(),i("div",{id:n.id,style:{width:"100%",height:"100%",minWidth:"320px",minHeight:"180px"}},null,8,["id"])};const Z={name:"ElUserNotice",data:()=>({isCollapse:!1}),props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},mounted(){}},W={class:"user-notice"},M=u("i",{class:"el-icon-s-comment"},null,-1),R=u("i",{class:"el-icon-message-solid"},null,-1),U={class:"avatar-block"},N=p("修改密码"),X=p("退出登录");Z.render=function(a,o,s,n,r,d){const c=e("el-badge"),h=e("el-avatar"),m=e("el-dropdown-item"),p=e("el-dropdown-menu"),g=e("el-dropdown");return t(),i("div",W,[u(c,{value:12,class:"item"},{default:l((()=>[M])),_:1}),u(c,{value:12,class:"item"},{default:l((()=>[R])),_:1}),u("div",U,[u(g,null,{dropdown:l((()=>[u(p,null,{default:l((()=>[u(m,null,{default:l((()=>[N])),_:1}),u(m,{divided:""},{default:l((()=>[X])),_:1})])),_:1})])),default:l((()=>[u(h,{size:32,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"})])),_:1})])])};const H={name:"ElWechatLogin",data:()=>({id:Math.random().toString(36).substr(2),wx:null}),props:{wechat_code:{type:String,default:"8oaj0ph"}},mounted(){this.getData()},methods:{getData:function(){let e=this;console.log("getData",e),I.getWechatConfig.send({code:this.wechat_code}).then((t=>{console.log("result",t),2e3==t.state&&(e.data=t.data,e.wx=new WxLogin({self_redirect:!0,id:e.id,appid:t.data.appid,scope:t.data.scope,redirect_uri:t.data.auth_redirect_url,state:e.wechat_code+"@"+window.location.href,style:"black"}))})).catch((e=>{console.log(e)}))}}};H.render=function(e,a,o,s,n,r){return t(),i("div",{id:n.id,style:{width:"100%",height:"100%",minWidth:"200px",minHeight:"200px"}},null,8,["id"])};const F={name:"ElMonitorProductDistribution",data:()=>({id:Math.random().toString(36).substr(2),data:[],form:{},chartPie:{}}),props:{query:{type:Object,default:function(){return{timely:"720"}}}},mounted(){this.form=this.query,"page"in this.form&&delete this.form.page,"size"in this.form&&delete this.form.size,"order"in this.form&&delete this.form.order,"sort"in this.form&&delete this.form.sort,this.getData()},methods:{initChartBar(e,t){var i={dataZoom:[{type:"inside",throttle:"50",minValueSpan:10,start:100,end:100,zoomLock:!0}],title:{text:t.title},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"none"}},xAxis:{type:"category",data:t.x,axisTick:{show:!1}},yAxis:{type:"value"},series:[{type:"bar",data:t.y}]};let a=this.$echarts.init(document.getElementById(e));a.setOption(i),a.resize(),window.addEventListener("resize",(()=>{a.resize()}))},initChartPie(e,t){if(this.chartPie[e]){(i=this.chartPie[e].getOption()).series[0].data=[],this.chartPie[e].setOption(i),i.series[0].data=t.data,this.chartPie[e].setOption(i)}else{let a=this.$echarts.init(document.getElementById(e));var i={tooltip:{trigger:"item"},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},legend:{orient:"vertical",left:"left"},series:[{name:t.name,type:"pie",radius:"50%",data:t.data,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(i),a.resize(),window.addEventListener("resize",(()=>{a.resize()})),this.chartPie[e]=a}},initChartLine(e,t){if(this.chartLine){(i=this.chartLine.getOption()).xAxis[0].data=[],i.series[0].data=[],this.chartLine.setOption(i),i.xAxis[0].data=e,i.series[0].data=t,i.dataZoom[0].start=100,i.dataZoom[0].end=100,this.chartLine.setOption(i)}else{let a=this.$echarts.init(document.getElementById("echart-line"));var i={dataZoom:[{type:"inside",throttle:"50",minValueSpan:5,start:100,end:100,zoomLock:!0}],tooltip:{trigger:"axis",axisPointer:{type:"none"}},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",data:e,axisTick:{show:!1}},yAxis:{type:"value"},series:[{type:"line",data:t}]};a.setOption(i),window.addEventListener("resize",(()=>{a.resize()})),a.resize(),this.chartLine=a}},getData:function(){let e=this;I.getProductDistribution.send(this.form).then((t=>{if(console.log("result",t),2e3==t.state){var i=[];t.data.forEach((function(e){i.push({name:e.name,value:e.count})})),e.data=i,e.initChartPie(e.id,{title:"产品分布",name:"产品分布",data:i})}})).catch((e=>{console.log(e)}))}}};F.render=function(e,a,o,s,n,r){return t(),i("div",{id:n.id,style:{width:"1560px",height:"300px"}},null,8,["id"])};const K={name:"ElMonitorStatusDistribution",data:()=>({id:Math.random().toString(36).substr(2),data:[],form:{},chartPie:{}}),props:{query:{type:Object,default:function(){return{seq_type:"Sanger验证"}}}},mounted(){let e=this;this.form=this.query,"page"in this.form&&delete this.form.page,"size"in this.form&&delete this.form.size,"order"in this.form&&delete this.form.order,"sort"in this.form&&delete this.form.sort,this.getData(),g((()=>this.query),((t,i)=>{e.form=t,console.log("watch_query",e.form),e.getData()}))},methods:{initChartBar(e,t){var i={dataZoom:[{type:"inside",throttle:"50",minValueSpan:10,start:100,end:100,zoomLock:!0}],title:{text:t.title},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"none"}},xAxis:{type:"category",data:t.x,axisTick:{show:!1}},yAxis:{type:"value"},series:[{type:"bar",data:t.y}]};let a=this.$echarts.init(document.getElementById(e));a.setOption(i),window.addEventListener("resize",(()=>{a.resize()}))},initChartPie(e,t){if(this.chartPie[e]){(i=this.chartPie[e].getOption()).series[0].data=[],this.chartPie[e].setOption(i),i.series[0].data=t.data,this.chartPie[e].setOption(i)}else{let a=this.$echarts.init(document.getElementById(e));var i={tooltip:{trigger:"item"},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},legend:{orient:"vertical",left:"left"},series:[{name:t.name,type:"pie",radius:"50%",data:t.data,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(i),a.resize(),window.addEventListener("resize",(()=>{a.resize()})),this.chartPie[e]=a}},initChartLine(e,t){if(this.chartLine){(i=this.chartLine.getOption()).xAxis[0].data=[],i.series[0].data=[],this.chartLine.setOption(i),i.xAxis[0].data=e,i.series[0].data=t,i.dataZoom[0].start=100,i.dataZoom[0].end=100,this.chartLine.setOption(i)}else{let a=this.$echarts.init(document.getElementById("echart-line"));var i={dataZoom:[{type:"inside",throttle:"50",minValueSpan:5,start:100,end:100,zoomLock:!0}],toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{}},xAxis:{type:"category",data:e,axisTick:{show:!1}},yAxis:{type:"value"},series:[{type:"line",data:t}]};a.setOption(i),window.addEventListener("resize",(()=>{a.resize()})),this.chartLine=a}},getData:function(){let e=this;I.getStatusDistribution.send(this.form).then((t=>{if(console.log("result",t),2e3==t.state){var i=[];t.data.forEach((function(e){i.push({name:e.name,value:e.count})})),e.data=i,e.initChartPie(e.id,{title:"状态分布",name:"状态分布",data:i})}})).catch((e=>{console.log(e)}))}}};K.render=function(e,a,o,s,n,r){return t(),i("div",{id:n.id,style:{width:"100%",height:"100%",minWidth:"1000px",minHeight:"300px"}},null,8,["id"])};const G=f(x);G.use(y,{size:"small",zIndex:3e3});[T,q,Z,H,F,K].forEach((e=>{G.component(e.name,e)})),G.use(P),G.use(D),D.dispatch("getLoginUser"),G.config.globalProperties.$echarts=w,G.config.globalProperties.$filters={findStatusByCode(e,t){var i="";let a;for(a in t)t[a].value==e&&(i=t[a].label);return i}},G.mount("#app");export{I as a};
